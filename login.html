<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - VartaLab</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="auth-page">
    <div class="neon-bg"></div>
    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <div class="logo">
                    <svg width="56" height="56" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="bubbleGradient" x1="12" y1="8" x2="60" y2="60" gradientUnits="userSpaceOnUse">
                                <stop offset="0" stop-color="#00D4FF"/>
                                <stop offset="1" stop-color="#002A5E"/>
                            </linearGradient>
                            <linearGradient id="vGradient" x1="18" y1="20" x2="54" y2="44" gradientUnits="userSpaceOnUse">
                                <stop offset="0" stop-color="#F2C46F"/>
                                <stop offset="1" stop-color="#E0A63A"/>
                            </linearGradient>
                        </defs>
                        <path d="M16 10C16 7.23858 18.2386 5 21 5H51C53.7614 5 56 7.23858 56 10V38C56 40.7614 53.7614 43 51 43H34L26 51L26.5 43H21C18.2386 43 16 40.7614 38V10Z" fill="url(#bubbleGradient)"/>
                        <path d="M27 20C27.6 20 28.14 20.34 28.38 20.9C29.92 24.54 31.74 28.32 33.96 31.7C34.52 32.56 35.02 33.12 35.5 33.12C35.98 33.12 36.48 32.56 37.04 31.7C39.26 28.32 41.08 24.54 42.62 20.9C42.86 20.34 43.4 20 44 20H47C47.86 20 48.42 20.92 48.08 21.72C46 26.68 43.38 31.4 40.3 35.56C38.96 37.36 37.38 38.5 35.5 38.5C33.62 38.5 32.04 37.36 30.7 35.56C27.62 31.4 25 26.68 22.92 21.72C22.58 20.92 23.14 20 24 20H27Z" fill="url(#vGradient)"/>
                    </svg>
                </div>
                <h2 id="auth-title">Welcome Back</h2>
                <p id="auth-subtitle">Sign in to your account</p>
            </div>

            {% if error %}
            <div class="error-message">{{ error }}</div>
            {% endif %}

            <form id="auth-form" method="POST" action="{{ url_for('login') }}">
                <div class="form-group">
                    <input type="text" id="username" name="username" placeholder="Username" required>
                </div>
                
                <div class="form-group">
                    <input type="password" id="password" name="password" placeholder="Password" required>
                </div>
                
                <div class="form-group" id="name-group" style="display: none;">
                    <input type="text" id="name" name="name" placeholder="Display Name (optional)">
                </div>
                
                <button type="submit" class="btn btn-primary">Sign In</button>
            </form>
            
            <div class="auth-switch">
                <p id="switch-text">Don't have an account? 
                    <a href="#" id="switch-link">Sign up</a>
                </p>
            </div>
        </div>
    </div>

    <script>
        const authForm = document.getElementById('auth-form');
        const authTitle = document.getElementById('auth-title');
        const authSubtitle = document.getElementById('auth-subtitle');
        const switchText = document.getElementById('switch-text');
        const switchLink = document.getElementById('switch-link');
        const nameGroup = document.getElementById('name-group');
        const submitBtn = authForm.querySelector('button[type="submit"]');
        
        let isSignUp = false;
        
        switchLink.addEventListener('click', (e) => {
            e.preventDefault();
            isSignUp = !isSignUp;
            
            if (isSignUp) {
                authForm.action = "{{ url_for('signup') }}";
                authTitle.textContent = 'Create Account';
                authSubtitle.textContent = 'Join the conversation';
                submitBtn.textContent = 'Sign Up';
                switchText.innerHTML = 'Already have an account? <a href="#" id="switch-link">Sign in</a>';
                nameGroup.style.display = 'block';
            } else {
                authForm.action = "{{ url_for('login') }}";
                authTitle.textContent = 'Welcome Back';
                authSubtitle.textContent = 'Sign in to your account';
                submitBtn.textContent = 'Sign In';
                switchText.innerHTML = 'Don\'t have an account? <a href="#" id="switch-link">Sign up</a>';
                nameGroup.style.display = 'none';
            }
            
            // Re-attach event listener to new link
            document.getElementById('switch-link').addEventListener('click', arguments.callee);
        });
    </script>
</body>
</html>
